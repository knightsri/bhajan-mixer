# Nginx CORS Configuration for miniurl.shalusri.com
# Add this to your nginx configuration file

# Option 1: Add to the specific location block for your short URLs
location / {
    # Add CORS headers to ALL responses (including redirects)
    add_header 'Access-Control-Allow-Origin' '*' always;
    add_header 'Access-Control-Allow-Methods' 'GET, OPTIONS' always;
    add_header 'Access-Control-Allow-Headers' 'Origin, Content-Type, Accept' always;
    add_header 'Access-Control-Max-Age' '3600' always;

    # Handle preflight OPTIONS requests
    if ($request_method = 'OPTIONS') {
        return 204;
    }

    # Your existing redirect configuration goes here
    # (the 307 redirect to Google Drive)
}

# Option 2: If you want CORS only for specific domains
# Replace the first add_header line with:
# add_header 'Access-Control-Allow-Origin' 'https://bhajans.shalusri.com' always;

# IMPORTANT: The 'always' parameter is crucial!
# It ensures CORS headers are added to redirect responses (307, 302, etc.)
# Without 'always', headers are only added to 200 responses.
